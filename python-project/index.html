<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>How to manage a Python Project</title>
<meta name="description" content="How to manage a Python Project">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/distributed-systems-python-101/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/distributed-systems-python-101/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/distributed-systems-python-101/css/custom-theme.min.c0f7878dc8d1bf72f682bf675cb3aee36f75a07caeda734f3608c1221c238ecd.css" id="theme"><link rel="stylesheet" href="/distributed-systems-python-101/highlight-js/github.min.css">
<link rel="stylesheet" href="https://raw.githubusercontent.com/DanySK/css-blur-animation/master/blur.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<script src="https://kit.fontawesome.com/81ac037be0.js" crossorigin="anonymous"></script>
<script src="https://MatteoMagnini.github.io/distributed-systems-python-101//plantuml.js"></script>

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="how-to-manage-a-python-project">How to manage a Python Project</h1>
<br>
<h2 id="hahahugoshortcode1s0hbhb">Python 101</h2>
<h3 id="for-distributed-systems"><strong>(for Distributed Systems)</strong></h3>
<h3 id="module-2">Module 2</h3>
<h4 id="hahahugoshortcode1s1hbhb">A.Y. 2024/2025</h4>
<h5 id="hahahugoshortcode1s2hbhb-based-on-the-material-made-by-hahahugoshortcode1s3hbhb"><a href="mailto:matteo.magnini@unibo.it">Matteo Magnini</a> (based on the material made by <a href="mailto:giovanni.ciatto@unibo.it">Giovanni Ciatto</a>)</h5>
<br>
<br>
<p>Compiled on: 2024-09-12 — <a href="?print-pdf&amp;pdfSeparateFragments=false"><i class="fa fa-print" aria-hidden="true"></i> printable version</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
<p><a href="#table-of-contents"><i class="fa fa-arrow-down" aria-hidden="true"></i> table of content</a></p>
</section><section>
<h1 id="software-organization">Software Organization</h1>
</section><section>
<h2 id="modules">Modules</h2>
<ul>
<li>A <em>module</em> is a file containing Python definitions and statements.</li>
<li>You can import a module with the <code>import</code> keyword.</li>
<li>You can import a specific function or class from a module with the <code>from</code> keyword.</li>
<li>You can also import a module with an alias with the <code>as</code> keyword.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># You can import a module</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">math</span> <span style="color:#204a87;font-weight:bold">as</span> <span style="color:#000">m</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">math</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">sqrt</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># You can use the imported module</span>
</span></span><span style="display:flex;"><span><span style="color:#000">x</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">m</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">sqrt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">25</span><span style="color:#000;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic"># 5</span>
</span></span><span style="display:flex;"><span><span style="color:#000">y</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">sqrt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">36</span><span style="color:#000;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic"># 6</span>
</span></span></code></pre></div><ul>
<li><code>math</code> is a built-in module in Python.</li>
<li>You can find the list of built-in modules in the <a href="https://docs.python.org/3/library/index.html">Python Standard Library</a>.</li>
</ul>
</section><section>
<h2 id="packages">Packages</h2>
<ul>
<li>A <em>package</em> is a collection of modules.</li>
<li>A package is a directory containing a file named <code>__init__.py</code>.</li>
<li>You can import a package with the <code>import</code> keyword.</li>
<li>You can import a specific module from a package with the <code>from</code> keyword.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># You can import a package</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">numpy</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># You can import a module from a package</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">numpy</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">random</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># You can use the imported package</span>
</span></span><span style="display:flex;"><span><span style="color:#000">y</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">random</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">randint</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">10</span><span style="color:#000;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic"># random integer between 1 and 10</span>
</span></span></code></pre></div><ul>
<li><code>numpy</code> is a third-party package in Python!</li>
</ul>
</section><section>
<h2 id="dependency-management">Dependency Management</h2>
<p>In the package example we used <code>numpy</code>, but because it is a third-party package, we need to install it first.
In general, there could be many dependencies in a project, and it is hard to manage them manually.
The need for build systems in Python emerged with more complex use cases.</p>
<ul>
<li>Since there were none, now there are several tools that do build-related jobs:</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.anaconda.com/">Anaconda</a></td>
<td><a href="https://docs.conda.io/en/latest/index.html">Conda</a></td>
<td><a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a></td>
<td><a href="https://pypi.org/project/pip/">pip</a></td>
</tr>
<tr>
<td><a href="https://python-poetry.org/">Poetry</a></td>
<td><a href="https://pybuilder.io/">PyBuilder</a></td>
<td><a href="https://github.com/pyenv/pyenv">PyEnv</a></td>
<td><a href="https://virtualenv.pypa.io/en/latest/#">virtualenv</a></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>The feature set varies wildly</li>
<li>They are meant to solve different problems!</li>
</ul>
</section><section>
<h2 id="pythons-conflicting-standards">Python’s conflicting standards</h2>
<p><img src="https://imgs.xkcd.com/comics/python_environment.png" alt="xkcd"></p>
<p>Since there were no standard management systems originally,
multiple tools <em>proliferated</em></p>
<ul>
<li>
<p>The Python Packaging Authority (PyPA) is inconsistent in its suggestions:</p>
<ul>
<li>Recommends <a href="https://docs.python.org/3/library/venv.html"><code>venv</code></a></li>
<li>Also recommends <a href="https://pipenv.pypa.io/en/latest/">Pipenv</a> , which uses <a href="https://virtualenv.pypa.io/en/latest/"><code>virtualenv</code></a></li>
<li>Also endorses <a href="https://python-poetry.org/">Poetry</a></li>
</ul>
</li>
<li>
<p>Many Python developers also exploit <a href="https://github.com/pyenv/pyenv">PyEnv</a></p>
</li>
<li>
<p>Many data scientists use <a href="https://www.anaconda.com/">Anaconda</a></p>
</li>
</ul>
</section><section>
<h2 id="what-are-all-these-tools-pt-1">What are all these tools? (pt. 1)</h2>
<ol>
<li>
<p>By default, Python is installed <em>system-wide</em></p>
<ul>
<li>i.e. there should be <em>one</em> (and <strong>only</strong> one) Python interpreter on the system</li>
</ul>
</li>
<li>
<p>All Python installations come with <code>pip</code>, the <em>package installer</em> for Python</p>
</li>
<li>
<p>So, one may <strong>install</strong> Python packages <em>system-wide</em> with <code>pip install PACKAGE_NAME</code></p>
</li>
</ol>
<blockquote>
<p><strong>One problem, many implications</strong>: the same package can be installed <em>only once</em> on the same Python installation</p>
<ul>
<li><strong>(a)</strong> what if two projects on the same system require <em>different versions</em> of the <em>same package</em> as dependencies?
<ul>
<li>say, <strong>project A</strong> requires <code>Kivy==2.3</code> and <strong>project B</strong> requires <code>Kivy==1.4</code></li>
</ul>
</li>
<li><strong>(b)</strong> what if two projects on the same system require <em>different versions of Python</em>?
<ul>
<li>say, <strong>project A</strong> requires Python <code>3.8</code> and <strong>project B</strong> requires Python <code>3.10</code></li>
</ul>
</li>
</ul>
</blockquote>
</section><section>
<h2 id="what-are-all-these-tools-pt-2">What are all these tools? (pt. 2)</h2>
<p>(consider reading this page for further details <a href="https://stackoverflow.com/a/41573588">https://stackoverflow.com/a/41573588</a>)</p>
<ol start="4">
<li>
<p><code>virtualenv</code> and <code>venv</code> are tools to create <em>virtual</em> Python installations <em>on the same system</em></p>
<ul>
<li><code>virtualenv</code> is a <em>third-party</em> tool, <code>venv</code> is <em>built-in</em> in Python 3.3 and later</li>
<li>let’s say you have Python <code>v. XXX</code> installed on your system…
<ul>
<li>… these tools let you create other <em>lightweight</em> <strong>copies</strong> of Python <code>v. XXX</code> in other folders
<ul>
<li>the copies are <strong>fresh</strong>, i.e. they <em>no package</em> installed</li>
<li>but one may install <em>different</em> packages in <em>each</em> copy, via <code>pip</code></li>
</ul>
</li>
</ul>
</li>
<li>now you can solve problem <strong>(a)</strong></li>
</ul>
</li>
<li>
<p><code>PyEnv</code> is a tool to manage <em>multiple</em> Python <strong>installations</strong> <em>on the same system</em></p>
<ul>
<li>each installation may use a <em>different version</em> of Python</li>
<li>now you can solve problem <strong>(b)</strong></li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>New problem</strong>: many Python installations on the same system,
<br> each one with a different version of Python, and different packages installed</p>
</blockquote>
<p>recall all the issues we had in previous lectures?</p>
</section><section>
<h2 id="what-are-all-these-tools-pt-3">What are all these tools? (pt. 3)</h2>
<ol start="6">
<li>
<p>Smart and adequate <strong>convention</strong> to work with Python projects: <strong>1-project-1-Python-env</strong></p>
<ul>
<li>each Python project has its <em>own</em> Python environment …
<ul>
<li>be it virtual or not, as far as it uses the <em>same</em> Python version required by that project</li>
</ul>
</li>
<li>… the environment <em>only</em> contains the packages required by that project</li>
</ul>
</li>
<li>
<p>Achieving this requires developers to be <em>disciplined</em> and <em>meticulous</em></p>
<ul>
<li>other than being proficient with the tools above</li>
</ul>
</li>
<li>
<p><code>Poetry</code> is a tool that aims to <em>automate</em> this process</p>
</li>
</ol>
</section><section>
<h2 id="from-now-on-lets-use-poetry">From now on, let’s use Poetry</h2>
<blockquote>
<p>Poetry is a <em>declarative</em> tool for <strong>dependency management</strong>, <strong>packaging</strong>, and <strong>release</strong> in Python</p>
</blockquote>
<ul>
<li>
<p>It handles both <em>dependencies</em> and <em>dev-dependencies</em></p>
<ul>
<li><em>replacing</em> <code>requirements.txt</code> and <code>requirements-dev.txt</code></li>
</ul>
</li>
<li>
<p>It <em>automates</em> the <strong>1-project-1-Python-env</strong> convention</p>
</li>
<li>
<p>It simplifies the <em>packaging</em> process for the project</p>
</li>
<li>
<p>It simplifies the <em>publication</em> process on PyPI (or other software repositories)</p>
</li>
</ul>
</section><section>
<h2 id="getting-started-with-poetry">Getting started with Poetry</h2>
<ul>
<li><code>Poetry</code> is a modern dependency management tool for Python.</li>
<li>You can install <code>Poetry</code> with the following command:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>curl -sSL https://install.python-poetry.org <span style="color:#000;font-weight:bold">|</span> python3 -
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Create a new project</span>
</span></span><span style="display:flex;"><span>poetry new my_project
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Add a dependency</span>
</span></span><span style="display:flex;"><span>poetry add numpy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Install dependencies</span>
</span></span><span style="display:flex;"><span>poetry install
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Run a script</span>
</span></span><span style="display:flex;"><span>poetry run python my_script.py
</span></span></code></pre></div></section><section>
<h2 id="poetrys-canonical-project-structure">(Poetry’s canonical) Project Structure</h2>
<ul>
<li>A Python project typically has the following structure:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>&lt;root directory&gt;  <span style="color:#8f5902;font-style:italic"># main directory of the project</span>
</span></span><span style="display:flex;"><span>├── &lt;package&gt;/  <span style="color:#8f5902;font-style:italic"># main package of the project (there can be multiple packages)</span>
</span></span><span style="display:flex;"><span>│   ├── __init__.py  <span style="color:#8f5902;font-style:italic"># python package marker</span>
</span></span><span style="display:flex;"><span>│   └── &lt;module&gt;.py  <span style="color:#8f5902;font-style:italic"># module in the package (there can be multiple modules)</span>
</span></span><span style="display:flex;"><span>├── test/
</span></span><span style="display:flex;"><span>│   └── test_&lt;module&gt;.py  <span style="color:#8f5902;font-style:italic"># test module for the module</span>
</span></span><span style="display:flex;"><span>├── .github/
</span></span><span style="display:flex;"><span>│   └── workflows/
</span></span><span style="display:flex;"><span>│       └── check.yml  <span style="color:#8f5902;font-style:italic"># some github action</span>
</span></span><span style="display:flex;"><span>├──.gitignore  <span style="color:#8f5902;font-style:italic"># git ignore file</span>
</span></span><span style="display:flex;"><span>├──.gitattributes  <span style="color:#8f5902;font-style:italic"># git attributes file (e.g., for line endings in different OS)</span>
</span></span><span style="display:flex;"><span>├──__main__.py  <span style="color:#8f5902;font-style:italic"># application entry point</span>
</span></span><span style="display:flex;"><span>├── LICENSE  <span style="color:#8f5902;font-style:italic"># license file (e.g., Apache 2.0)</span>
</span></span><span style="display:flex;"><span>├── pyproject.toml  <span style="color:#8f5902;font-style:italic"># build dependencies</span>
</span></span><span style="display:flex;"><span>├── poetry.toml  <span style="color:#8f5902;font-style:italic"># Poetry settings (we will see Poetry for dependency management)</span>
</span></span><span style="display:flex;"><span>└── README.md  <span style="color:#8f5902;font-style:italic"># don't forget to write a README file</span>
</span></span></code></pre></div></section><section>
<h1 id="how-to-manage-a-python-project-1">How to manage a Python Project</h1>
<h2 id="hahahugoshortcode1s0hbhb">Python 101</h2>
<h3 id="for-distributed-systems"><strong>(for Distributed Systems)</strong></h3>
<h3 id="module-2">Module 2</h3>
<h4 id="hahahugoshortcode1s1hbhb">A.Y. 2024/2025</h4>
<h5 id="hahahugoshortcode1s2hbhb"><a href="mailto:giovanni.ciatto@unibo.it">Giovanni Ciatto</a></h5>
<h5 id="hahahugoshortcode1s3hbhb"><a href="mailto:matteo.magnini@unibo.it">Matteo Magnini</a></h5>
</section><section>
<h2 id="table-of-contents">Table of Contents</h2>
<ol start="0">
<li><a href="..">Course Overview</a></li>
<li><a href="../intro">Preliminary notions for Software Development</a></li>
<li><a href="../language">Introduction to the Python Language</a></li>
<li><a href="../python-project">How to manage a Python Project</a></li>
<li><a href="../example">A Python Project Example</a></li>
<li><a href="../qa-tdd">QA, testing, TDD, reproducibility and replicability</a></li>
</ol>
<br>
<br>
<p><a href="."><i class="fa fa-arrow-up" aria-hidden="true"></i> top</a></p>
<p><a href=".."><i class="fa fa-undo" aria-hidden="true"></i> back</a></p>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/distributed-systems-python-101/reveal-hugo/object-assign.js"></script>

<a href="/distributed-systems-python-101/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"1080","highlight_theme":"github","history":true,"mermaid":[{"gitGraph":{"mainBranchName":"master","rotateCommitLabel":true},"startOnLoad":false,"useMaxWidth":false}],"slide_number":true,"theme":"league","transition":"slide","transition_speed":"fast","width":"1920"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/distributed-systems-python-101/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/distributed-systems-python-101/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/distributed-systems-python-101/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/distributed-systems-python-101/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/distributed-systems-python-101/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/distributed-systems-python-101/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = { 
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>






  

  

  

  

  

  

  

  



    <script>
    MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        svg: {
            fontCache: 'global'
        }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

<script>
    if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
        var ytVideos = document.getElementsByTagName("iframe")
        for (let i = 0; i < ytVideos.length; i++) {
            var videoFrame = ytVideos[i]
            var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
            if (isYouTube) {
                console.log(`Removing ${videoFrame.src}`)
                var parent = videoFrame.parentElement
                videoFrame.remove()
                var p = document.createElement('p')
                p.append(
                    document.createTextNode(
                        "There was an embedded video here, but it is disabled in the printed version of the slides."
                    )
                )
                p.append(document.createElement('br'))
                p.append(
                    document.createTextNode(
                        `Visit instead ${
                            videoFrame.src
                        } or ${
                            videoFrame.src.replace(
                                /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                                "https://www.youtube.com/watch?v=$4"
                            )
                        }`
                    )
                )
                parent.appendChild(p)
            }
        }
    }
</script>

    
  

</body></html>